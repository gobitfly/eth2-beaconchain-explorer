{{ define "js" }}
  <script type="text/javascript" src="/js/bootstrap4-toggle.min.js"></script>
{{ end }}

{{ define "css" }}
  <link rel="stylesheet" type="text/css" href="/css/bootstrap4-toggle.min.css" />
{{ end }}

{{ define "content" }}
  <section>
    <div class="container">
      <div class="h-100 py-4">
        <br />
        <h1>Relays:</h1>
        <p class="text-muted">
          Validators can use Relays to outsource their Block Production to entites specialized in extracting extra revenue. These Relays exists a means of minimizing required trust under the participating entites - they only have to trust the relay itself, and not each other. <br />
          Extra Revenue is generated by reordering and/or inserting transactions in an otherwise normal block. This is often refered to as MEV, or "Maximum-Extractable-Value". The validator which gets to propose a block by a relay will get a cut of this revenue in exchange, shown below as the "bribe".<br />
          A Relay can consist of a single builder, in which case the relay builder will accept transaction bundles from searchers, or many builders, where the relay operator will pick the the block of the builder with the highest bribe.
        </p>
        <ul class="nav nav-tabs justify-content-end" role="tablist">
          {{ range $index, $d := .Data.RelaysInfoContainers }}
            <li class="nav-item">
              <a class="nav-link {{ if $d.IsFirst }}active{{ end }}" id="t{{ $index }}_t" data-toggle="tab" href="#t{{ $index }}" role="tab" aria-controls="t{{ $index }}" aria-selected="true"><span class="tab-text">{{ $d.TimeSpan }}</span></a>
            </li>
          {{ end }}
        </ul>
        <div class="row mt-4">
          <div class="col-md-12">
            <div id="poolTable" class="table-responsive tab-content card px-0 pb-1 mb-2">
              {{ range $index, $d := .Data.RelaysInfoContainers }}
                <div class="tab-pane fade {{ if $d.IsFirst }}show active{{ end }}" id="t{{ $index }}" role="tabpanel" aria-labelledby="t{{ $index }}_t">
                  <table class="table" id="staking-pool-table">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Block Count</th>
                        <th>Unique Builders</th>
                        <th>Overall Bribes</th>
                        <th>Average Bribe</th>
                        <th>Highest Bribe</th>
                        <th>Uncensored</th>
                        <th>Ethical</th>
                      </tr>
                    </thead>
                    <tbody>
                      {{ range $d.RelaysInfo }}
                        <tr>
                          {{ if .Link.Valid }}
                            <td><a href="{{ .Link.String }}" target="_blank" rel="noreferrer noopener">{{ .Name.String }}</a></td>
                          {{ else }}
                            <td>{{ .Name.String }}</td>
                          {{ end }}
                          <td>{{ .BlockCount }} ({{ formatPercentageWithPrecision .NetworkUsage 2 }}%)</td>
                          <td>{{ .UniqueBuilders }}</td>
                          <td>{{ formatBalance .TotalValue $.Rates.Currency }}</td>
                          <td>{{ formatSmallBalance .AverageValue $.Rates.Currency }}</td>
                          <td>{{ formatBalance .MaxValue $.Rates.Currency }} (Slot {{ formatBlockSlot .MaxValueSlot }})</td>
                          {{ if .Censors.Valid }}
                            <td>{{ formatYesNo (not .Censors.Bool) }}</td>
                          {{ else }}
                            <td><span class="badge badge-pill bg-info text-white" style="font-size: 12px; font-weight: 500;">???</span></td>
                          {{ end }}
                          {{ if .Ethical.Valid }}
                            <td>{{ formatYesNo (.Ethical.Bool) }}</td>
                          {{ else }}
                            <td><span class="badge badge-pill bg-info text-white" style="font-size: 12px; font-weight: 500;">???</span></td>
                          {{ end }}
                        </tr>
                      {{ end }}
                    </tbody>
                  </table>
                </div>
              {{ end }}
            </div>
          </div>
        </div>
        <span class="px-2" id="lastUpdate"></span>
      </div>
    </div>
  </section>
  <div id="tempcont" class=""></div>
{{ end }}
